<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Node.js Todo List</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>

<div class="container">

  <!-- HEADER -->
  <h1>Node.js Todo List</h1>
  <p class="subtitle">Plan â€¢ Track â€¢ Complete</p>

  <!-- DASHBOARD -->
  <div class="stats">
    <div class="stat-card">
      <h3>Total</h3>
      <p id="total">0</p>
    </div>
    <div class="stat-card">
      <h3>Completed</h3>
      <p id="completed">0</p>
    </div>
    <div class="stat-card">
      <h3>Pending</h3>
      <p id="pending">0</p>
    </div>
    <div class="stat-card progress">
      <h3>Progress</h3>
      <p id="progress">0%</p>
    </div>
  </div>

  <!-- SEARCH & FILTER -->
  <div class="top-controls">
    <input
      type="text"
      id="search"
      placeholder="Search tasks..."
      autocomplete="off"
    />
    <select id="filter">
      <option value="all">All</option>
      <option value="completed">Completed</option>
      <option value="pending">Pending</option>
    </select>
    <button id="themeToggle">ðŸŒ™</button>
  </div>

  <!-- ADD TASK -->
  <form action="/add" method="POST" class="add-bar" autocomplete="off">
    <input
      type="text"
      name="todo"
      placeholder="Add new task..."
      required
      autocomplete="off"
    />
    <button type="submit">Add</button>
  </form>

  <!-- EMPTY STATE -->
  <% if (todos.length === 0) { %>
    <div class="empty-msg">
      <h2>No tasks yet ðŸš€</h2>
      <p>Start organizing your day</p>
    </div>
  <% } %>

  <!-- TASK LIST -->
  <ul class="todo-list">
    <% todos.forEach((todo, index) => { %>
      <% if (todo.text && todo.text.trim() !== "") { %>
        <li class="<%= todo.completed ? 'done' : '' %>">
          
          <span class="task-text"><%= todo.text %></span>

          <div class="actions">
            <form action="/toggle/<%= index %>" method="POST">
              <button class="check-btn" title="Complete">âœ”</button>
            </form>
            <form action="/delete/<%= index %>" method="POST">
              <button class="delete-btn" title="Delete">âœ–</button>
            </form>
          </div>
        </li>
      <% } %>
    <% }) %>
  </ul>

</div>

<div id="toast"></div>

<script src="/script.js"></script>
</body>
</html>
